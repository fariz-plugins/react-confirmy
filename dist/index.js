import{jsxs as e,jsx as o}from"react/jsx-runtime";import t,{useRef as r,useEffect as n,useState as i,createContext as a}from"react";import{createPopper as l}from"@popperjs/core";const s=({strokeWidth:t=2.5,strokeLinecap:r="round",strokeLinejoin:n="round",...i})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:r,strokeLinejoin:n,...i,children:[o("circle",{cx:"12",cy:"12",r:"10"}),o("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),c=({strokeWidth:t=2.5,strokeLinecap:r="round",strokeLinejoin:n="round",...i})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:r,strokeLinejoin:n,...i,children:[o("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),d=({strokeWidth:t=2.5,strokeLinecap:r="round",strokeLinejoin:n="round",...i})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:r,strokeLinejoin:n,...i,children:[o("circle",{cx:"12",cy:"12",r:"10"}),o("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),m=({strokeWidth:t=2.5,strokeLinecap:r="round",strokeLinejoin:n="round",...i})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:r,strokeLinejoin:n,...i,children:[o("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),g=({onClose:e,onConfirm:o,setIsLoading:t,setError:r,asyncOptions:n})=>({handleClose:()=>{r(null),e()},handleConfirm:async()=>{try{t(!0),await o(),n?.successText&&r(n.successText)}catch(e){r(n?.errorText?n.errorText:"An error occurred"),console.error(e)}finally{t(!1)}}});function u(e){var o,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(o=0;o<n;o++)e[o]&&(t=u(e[o]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function f(){for(var e,o,t=0,r="",n=arguments.length;t<n;t++)(e=arguments[t])&&(o=u(e))&&(r&&(r+=" "),r+=o);return r}const p={tailwind:{container:"z-50 bg-white rounded-lg shadow-xl p-4 border border-gray-200 transition-all duration-200",arrow:"absolute bg-white w-2 h-2 rotate-45 border border-gray-200 -z-[1]",closeButton:"absolute right-2 top-2 text-gray-400 hover:text-gray-500",closeIcon:"w-4 h-4",header:"flex items-center gap-2 mb-3",icon:"w-5 h-5",title:"text-base font-semibold text-gray-900",message:"text-sm text-gray-600 mb-4",form:"space-y-3 mb-4",formField:"flex flex-col gap-1",label:"text-sm font-medium text-gray-700",input:"px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",footer:"flex justify-end gap-2",cancelButton:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",confirmButton:{danger:"px-3 py-1.5 text-xs font-medium text-white rounded-md bg-red-600 hover:bg-red-700",warning:"px-3 py-1.5 text-xs font-medium text-white rounded-md bg-yellow-600 hover:bg-yellow-700",info:"px-3 py-1.5 text-xs font-medium text-white rounded-md bg-blue-600 hover:bg-blue-700"},sizeSM:"w-[320px]",sizeMD:"w-[400px]",sizeLG:"w-[512px]",darkMode:{container:"bg-gray-800 border-gray-700",title:"text-gray-100",message:"text-gray-300",label:"text-gray-300",input:"bg-gray-700 border-gray-600 text-gray-100 focus:ring-blue-500 focus:border-blue-500",cancelButton:"text-gray-300 bg-gray-700 hover:bg-gray-600",confirmButton:{danger:"bg-red-500 hover:bg-red-600",warning:"bg-yellow-500 hover:bg-yellow-600",info:"bg-blue-500 hover:bg-blue-600"}}},bootstrap:{container:"popover bs-popover-auto bg-white rounded shadow-lg p-3 border transition",arrow:"popover-arrow position-absolute",closeButton:"btn-close position-absolute top-0 end-0 p-2",closeIcon:"d-none",header:"d-flex align-items-center gap-2 mb-2",icon:"",title:"h6 mb-0",message:"small text-body-secondary mb-3",form:"mb-3",formField:"mb-2",label:"form-label small",input:"form-control form-control-sm",footer:"d-flex justify-content-end gap-2",cancelButton:"btn btn-sm btn-light",confirmButton:{danger:"btn btn-sm btn-danger",warning:"btn btn-sm btn-warning",info:"btn btn-sm btn-primary"},sizeSM:"w-320px",sizeMD:"w-400px",sizeLG:"w-512px",darkMode:{container:"bg-dark text-light border-secondary",title:"text-light",message:"text-light-50",label:"text-light",input:"bg-dark text-light border-secondary",cancelButton:"btn-dark",confirmButton:{danger:"btn-outline-danger",warning:"btn-outline-warning",info:"btn-outline-primary"}}},none:{container:"confirmy-dialog",arrow:"confirmy-dialog__arrow",closeButton:"confirmy-dialog__close-button",closeIcon:"confirmy-dialog__close-icon",header:"confirmy-dialog__header",icon:"confirmy-dialog__icon",title:"confirmy-dialog__title",message:"confirmy-dialog__message",form:"confirmy-dialog__form",formField:"confirmy-dialog__form-field",label:"confirmy-dialog__label",input:"confirmy-dialog__input",footer:"confirmy-dialog__footer",cancelButton:"confirmy-dialog__button confirmy-dialog__button--cancel",confirmButton:{danger:"confirmy-dialog__button confirmy-dialog__button--confirm confirmy-dialog__button--confirm-danger",warning:"confirmy-dialog__button confirmy-dialog__button--confirm confirmy-dialog__button--confirm-warning",info:"confirmy-dialog__button confirmy-dialog__button--confirm confirmy-dialog__button--confirm-info"},sizeSM:"confirmy-dialog--size-sm",sizeMD:"confirmy-dialog--size-md",sizeLG:"confirmy-dialog--size-lg",darkMode:{container:"confirmy-dialog--dark",title:"",message:"",label:"",input:"",cancelButton:"",confirmButton:{danger:"",warning:"",info:""}}}};function y({isOpen:t,onClose:a,onConfirm:u,triggerRef:y,title:b="Confirm Action",message:h="Are you sure you want to proceed?",confirmText:x="Confirm",cancelText:w="Cancel",type:k="warning",size:_="md",position:v="top",framework:C="tailwind",styles:B={},className:L="",darkMode:z=!1,customIcon:M,formFields:N=[],asyncOptions:j}){const[S,D]=i(!1),[I,T]=i(null),{dialogRef:W,arrowRef:$,getPositionClasses:O}=(({isOpen:e,triggerRef:o,position:t})=>{const i=r(null),a=r(null),s=r(null);return n((()=>{if(e&&o?.current&&i.current)return s.current&&s.current.destroy(),s.current=l(o.current,i.current,{placement:"top"===t?"top":"bottom"===t?"bottom":"auto",modifiers:[{name:"arrow",options:{element:a.current,padding:8}},{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:8,boundariesElement:"viewport"}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}}]}),()=>{s.current&&(s.current.destroy(),s.current=null)}}),[e,t,o]),{dialogRef:i,arrowRef:a,getPositionClasses:()=>{if(!o)switch(t){case"top":return"fixed top-4 left-1/2 transform -translate-x-1/2";case"bottom":return"fixed bottom-4 left-1/2 transform -translate-x-1/2";default:return"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}return""}}})({isOpen:t,triggerRef:y,position:v}),{handleClose:R,handleConfirm:F}=g({onClose:a,onConfirm:u,setIsLoading:D,setError:T,asyncOptions:j}),{mergedStyles:A,getDarkModeStyles:P,getSizeClass:E,getConfirmButtonStyles:G,Icon:q}=(({framework:e,styles:o={},size:t="md",darkMode:r=!1,type:n="warning",customIcon:i})=>{const a={...p[e],...o};return{mergedStyles:a,getDarkModeStyles:e=>r&&a.darkMode&&("string"==typeof a.darkMode[e]?a.darkMode[e]:"")||"",getSizeClass:()=>{switch(t){case"sm":return a.sizeSM||"";case"md":return a.sizeMD||"";case"lg":return a.sizeLG||"";default:return""}},getConfirmButtonStyles:e=>{const o=a.confirmButton[e];return r&&a.darkMode?.confirmButton?`${o} ${a.darkMode.confirmButton[e]||""}`:o},Icon:(()=>{if(i)return i;switch(n){case"danger":return s;case"warning":return c;default:return d}})()}})({framework:C,styles:B,size:_,darkMode:z,type:k,customIcon:M});if(!t)return null;const Q=f(O(),A.container,P("container"),E(),((e,o)=>{switch(o){case"tailwind":return f("transform","transition-all","origin-center",e?"opacity-100 translate-y-0 scale-100":"opacity-0 -translate-y-2 scale-95");case"bootstrap":return"fade "+(e?"show":"");case"none":return e?"opacity-100 translate-y-0 scale-100":"opacity-0 -translate-y-2 scale-95";default:return""}})(t,C),L);return e("div",{ref:W,className:Q,role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:[y&&o("div",{ref:$,className:A.arrow,"data-popper-arrow":!0}),o("button",{onClick:R,className:A.closeButton,"aria-label":"Close dialog",children:o(m,{className:A.closeIcon})}),e("div",{className:A.header,children:[o(q,{className:A.icon}),o("h3",{id:"dialog-title",className:`\n            ${A.title}\n            ${P("title")}\n          `,children:b})]}),o("p",{className:`\n          ${A.message}\n          ${P("message")}\n        `,children:I||h}),N.length>0&&o("div",{className:A.form,children:N.map((t=>e("div",{className:A.formField,children:[e("label",{htmlFor:t.name,className:A.label,children:[t.label,t.required&&o("span",{className:"text-red-500",children:"*"})]}),o("input",{id:t.name,type:t.type||"text",placeholder:t.placeholder,required:t.required,className:A.input})]},t.name)))}),e("div",{className:A.footer,children:[o("button",{onClick:R,className:`\n            ${A.cancelButton}\n            ${P("cancelButton")}\n          `,disabled:S,children:w}),o("button",{onClick:F,className:G(k),disabled:S,children:S&&j?.loadingText?j.loadingText:x})]})]})}const b=a(void 0);function h({children:t}){const[r,n]=i([]);return e(b.Provider,{value:{dialogQueue:r,addDialog:e=>{const o={id:Math.random().toString(36).substr(2,9),props:e};n((e=>[...e,o]))},removeDialog:e=>{n((o=>o.filter((o=>o.id!==e))))},updateDialog:(e,o)=>{n((t=>t.map((t=>t.id===e?{...t,props:{...t.props,...o}}:t))))}},children:[t,r.map((e=>o(y,{...e.props},e.id)))]})}function x(){const e=t.useContext(b);if(!e)throw new Error("useDialog must be used within a DialogProvider");return e}export{y as Confirmy,b as DialogContext,h as DialogProvider,p as defaultStyles,g as useConfirmy,x as useDialog};
//# sourceMappingURL=index.js.map
